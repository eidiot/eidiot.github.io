<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Android app Draw Shapes | Evan is Coding</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="My first Android App Draw Shapes, which is actually my first assignment of android programming class, is now on Google Play. The code is shared at GitHub.
ActionBarI want to show the user what they ar">
<meta property="og:type" content="article">
<meta property="og:title" content="Android app Draw Shapes">
<meta property="og:url" content="http://evancoding.com/2014/10/09/Android-app-Draw-Shapes/index.html">
<meta property="og:site_name" content="Evan is Coding">
<meta property="og:description" content="My first Android App Draw Shapes, which is actually my first assignment of android programming class, is now on Google Play. The code is shared at GitHub.
ActionBarI want to show the user what they ar">
<meta property="og:updated_time" content="2015-05-22T00:21:28.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android app Draw Shapes">
<meta name="twitter:description" content="My first Android App Draw Shapes, which is actually my first assignment of android programming class, is now on Google Play. The code is shared at GitHub.
ActionBarI want to show the user what they ar">
  
    <link rel="alternative" href="/atom.xml" title="Evan is Coding" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Evan is Coding</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Swift, Objective-C, JavaScript, ActionScript, C++, Java</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://evancoding.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Android-app-Draw-Shapes" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/10/09/Android-app-Draw-Shapes/" class="article-date">
  <time datetime="2014-10-08T16:42:31.000Z" itemprop="datePublished">9 Oct 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Android app Draw Shapes
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>My first Android App <a href="https://play.google.com/store/apps/details?id=com.evancoding.drawshapes" target="_blank" rel="external">Draw Shapes</a>, which is actually my first assignment of android programming class, is now on <a href="https://play.google.com/store/apps/details?id=com.evancoding.drawshapes" target="_blank" rel="external">Google Play</a>. <a href="https://github.com/evan-liu/DrawShaps" target="_blank" rel="external">The code</a> is shared at <a href="https://github.com/evan-liu/DrawShaps" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="ActionBar">ActionBar</h2><p>I want to show the user what they are drawing on the action bar. So I put a <code>DrawingShapeView</code> in <a href="https://github.com/evan-liu/DrawShaps/blob/master/app/src/main/res/layout/action_bar.xml" target="_blank" rel="external">action_bar layout</a>, and set it up in my <a href="https://github.com/evan-liu/DrawShaps/blob/master/app/src/main/java/com/evancoding/drawshapes/MainActivity.java#L69-L85" target="_blank" rel="external">MainActivity class</a>.</p>
<figure class="highlight java"><figcaption><span>MainActivity.setupActionBar()</span><a href="https://github.com/evan-liu/DrawShaps/blob/master/app/src/main/java/com/evancoding/drawshapes/MainActivity.java#L69-L85" target="_blank" rel="external">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">View actionBarView = LayoutInflater.from(<span class="keyword">this</span>).inflate(R.layout.action_bar, <span class="keyword">null</span>);</span><br><span class="line">((DrawingShapeView) actionBarView.findViewById(R.id.drawingShape)).setup(model, painter);</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">ActionBar actionBar = getActionBar();</span><br><span class="line">actionBar.setCustomView(actionBarView);</span><br><span class="line">actionBar.setDisplayShowHomeEnabled(<span class="keyword">false</span>);</span><br><span class="line">actionBar.setDisplayShowTitleEnabled(<span class="keyword">false</span>);</span><br><span class="line">actionBar.setDisplayShowCustomEnabled(<span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>In <a href="https://github.com/evan-liu/DrawShaps/blob/master/app/src/main/java/com/evancoding/drawshapes/view/DrawingShapeView.java#L34-L45" target="_blank" rel="external">setup() method</a> of <a href="https://github.com/evan-liu/DrawShaps/blob/master/app/src/main/java/com/evancoding/drawshapes/view/DrawingShapeView.java#L34-L45" target="_blank" rel="external">DrawingShapeView class</a> I listen to the change of color/shape from <a href="https://github.com/evan-liu/DrawShaps/blob/master/app/src/main/java/com/evancoding/drawshapes/model/DrawModel.java" target="_blank" rel="external">model class</a> and redraw it.</p>
<figure class="highlight java"><figcaption><span>DrawingShapeView.setup()</span><a href="https://github.com/evan-liu/DrawShaps/blob/master/app/src/main/java/com/evancoding/drawshapes/view/DrawingShapeView.java#L34-L45" target="_blank" rel="external">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">model.setOnColorChangeListener(<span class="keyword">new</span> DrawModel.OnColorChangeListener() &#123;</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onColorChanged</span><span class="params">(<span class="keyword">int</span> color)</span> </span>&#123;</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">model.setOnShapeChangeListener(<span class="keyword">new</span> DrawModel.OnShapeChangeListener() &#123;</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onShapeChanged</span><span class="params">(Shape shape)</span> </span>&#123;</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="DrawerLayout">DrawerLayout</h2><p>To use <code>DrawerLayout</code> you need to add <a href="http://developer.android.com/tools/support-library/index.html" target="_blank" rel="external">Support Library</a> to <code>build.gradle</code> of the app (not the top level one).</p>
<figure class="highlight gradle"><figcaption><span>app/build.gradle</span><a href="https://github.com/evan-liu/DrawShaps/blob/master/app/build.gradle" target="_blank" rel="external">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">'libs'</span>, <span class="keyword">include</span>: [<span class="string">'*.jar'</span>])</span><br><span class="line">    <span class="keyword">compile</span> <span class="string">"com.android.support:support-v4:20.0.0"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>And make the root to be <code>DrawerLayout</code>.</p>
<figure class="highlight xml"><figcaption><span>activity_main.xml</span><a href="https://github.com/evan-liu/DrawShaps/blob/master/app/src/main/res/layout/activity_main.xml" target="_blank" rel="external">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">android.support.v4.widget.DrawerLayout</span></span><br><span class="line">    <span class="attribute">android:id</span>=<span class="value">"@+id/drawer_layout"</span></span><br><span class="line">    <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attribute">android:layout_width</span>=<span class="value">"match_parent"</span></span><br><span class="line">    <span class="attribute">android:layout_height</span>=<span class="value">"match_parent"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">android.support.v4.widget.DrawerLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The <a href="https://github.com/evan-liu/DrawShaps/blob/master/app/src/main/res/layout/activity_main.xml#L7-L10" target="_blank" rel="external">first child</a> is the main view, others will be the drawers. I put 2 drawers, one on left and one on right.</p>
<figure class="highlight xml"><figcaption><span>activity_main.xml</span><a href="https://github.com/evan-liu/DrawShaps/blob/master/app/src/main/res/layout/activity_main.xml" target="_blank" rel="external">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// Main view</span><br><span class="line"><span class="tag">&lt;<span class="title">com.evancoding.drawshapes.view.DrawView</span> /&gt;</span></span><br><span class="line">// Left drawer</span><br><span class="line"><span class="tag">&lt;<span class="title">LinearLayout</span></span><br><span class="line">    <span class="attribute">android:id</span>=<span class="value">"@+id/toolsLayout"</span></span><br><span class="line">    <span class="attribute">android:layout_gravity</span>=<span class="value">"start"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">LinearLayout</span>&gt;</span></span><br><span class="line">// Right drawer</span><br><span class="line"><span class="tag">&lt;<span class="title">LinearLayout</span></span><br><span class="line">    <span class="attribute">android:id</span>=<span class="value">"@+id/buttonsLayout"</span></span><br><span class="line">    <span class="attribute">android:layout_gravity</span>=<span class="value">"end"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>You can then open/close the drawers in the activity class.</p>
<figure class="highlight java"><figcaption><span>MainActivity.setupDrawer()</span><a href="https://github.com/evan-liu/DrawShaps/blob/master/app/src/main/java/com/evancoding/drawshapes/MainActivity.java#L115-L135" target="_blank" rel="external">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setupDrawer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    drawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout);</span><br><span class="line">    toolsLayout = findViewById(R.id.toolsLayout);</span><br><span class="line">    buttonsLayout = findViewById(R.id.buttonsLayout);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>MainActivity.toggleDrawer()</span><a href="https://github.com/evan-liu/DrawShaps/blob/master/app/src/main/java/com/evancoding/drawshapes/MainActivity.java#L137-L143" target="_blank" rel="external">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">toggleDrawer</span><span class="params">(View drawer)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (drawerLayout.isDrawerOpen(drawer)) &#123;</span><br><span class="line">        drawerLayout.closeDrawer(drawer);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        drawerLayout.openDrawer(drawer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="StarDrawer">StarDrawer</h2><p>It took me a lot of time to figure out how to <a href="https://github.com/evan-liu/DrawShaps/blob/master/app/src/main/java/com/evancoding/drawshapes/shapes/StarDrawer.java" target="_blank" rel="external">draw a Star</a>. You can find it and all the other code on <a href="https://github.com/evan-liu/DrawShaps/" target="_blank" rel="external">GitHub</a>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://evancoding.com/2014/10/09/Android-app-Draw-Shapes/" data-id="ciavlmy8j000i8an6y97ghp5j" class="article-share-link">Share</a>
      
        <a href="http://evancoding.com/2014/10/09/Android-app-Draw-Shapes/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Apps/">Apps</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/10/15/C++-unit-testing-with-AppCode-and-GoogleTest/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          C++ unit testing with AppCode and GoogleTest
        
      </div>
    </a>
  
  
    <a href="/2014/09/06/TDD-Demo-GameOfLife-with-Android-Studio/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">TDD Demo GameOfLife with Android Studio</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AngularJS/">AngularJS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Apps/">Apps</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BDD/">BDD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swift/">Swift</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TDD/">TDD</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/AngularJS/" style="font-size: 10px;">AngularJS</a> <a href="/tags/Apps/" style="font-size: 10px;">Apps</a> <a href="/tags/BDD/" style="font-size: 10px;">BDD</a> <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Swift/" style="font-size: 15px;">Swift</a> <a href="/tags/TDD/" style="font-size: 20px;">TDD</a> <a href="/tags/iOS/" style="font-size: 20px;">iOS</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/06/24/FormationLayout-and-Protocol-Oriented-Programming-in-Swift/">FormationLayout and Protocol-Oriented Programming in Swift</a>
          </li>
        
          <li>
            <a href="/2015/05/22/BDD-Demo-with-GameOfLife-in-Swift-and-Quick/">BDD Demo with GameOfLife in Swift and Quick</a>
          </li>
        
          <li>
            <a href="/2015/03/01/AngularJS-unit-testing-with-Jasmine/">AngularJS unit testing with Jasmine</a>
          </li>
        
          <li>
            <a href="/2014/10/15/C++-unit-testing-with-AppCode-and-GoogleTest/">C++ unit testing with AppCode and GoogleTest</a>
          </li>
        
          <li>
            <a href="/2014/10/09/Android-app-Draw-Shapes/">Android app Draw Shapes</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 Evan Liu<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'eidiot-blog';
  
  var disqus_url = 'http://evancoding.com/2014/10/09/Android-app-Draw-Shapes/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>